(this.webpackJsonpgasbet=this.webpackJsonpgasbet||[]).push([[0],{17:function(e,t,n){e.exports=n(36)},22:function(e,t,n){},23:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){e.exports=n.p+"static/media/middleman.668e8cc0.png"},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(15),c=n.n(l),o=(n(22),n(2)),u=(n(23),n(10)),m=n(1),s=function(e){return r.a.createElement("div",null,r.a.createElement("p",null,"I am Home"))},i=function(){return localStorage.getItem("token")},E=Object(m.f)((function(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),l=n[0],c=n[1],u=Object(a.useState)(""),m=Object(o.a)(u,2),s=m[0],E=m[1];Object(a.useEffect)((function(){i()&&e.history.push("/dashboard")}),[]);var f=function(e){"username"===e.target.name&&c(e.target.value),"password"===e.target.name&&E(e.target.value)};return r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:function(t){return function(t){t.preventDefault();var n={username:l,password:s},a={body:JSON.stringify(n),method:"POST"};fetch("api/v1/getToken",a).then((function(e){return console.log(e.status),e.json().catch((function(e){return console.warn("cant unmarshal response",e)}))})).then((function(t){t.ok&&(e.setCurrentUser(t.result.username),localStorage.setItem("token",t.result.token),localStorage.setItem("current-user",t.result.username),e.loginHandler(),e.history.push("/dashboard"))})).catch((function(e){return console.warn(e)}))}(t)}},r.a.createElement("label",null,"Username"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"username",value:l,onChange:f,autoComplete:"username"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Password"),r.a.createElement("br",null),r.a.createElement("input",{type:"password",name:"password",value:s,onChange:f,autoComplete:"current-password"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{type:"submit"},"Submit"),r.a.createElement("button",{onClick:function(){c(""),E("")},type:"reset"},"Reset")))})),f=function(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),l=n[0],c=n[1],u=Object(a.useState)(""),m=Object(o.a)(u,2),s=m[0],E=m[1],f=Object(a.useState)(""),h=Object(o.a)(f,2),b=h[0],d=h[1];Object(a.useEffect)((function(){i()&&e.history.push("/dashboard")}),[]);var p=function(e){"username"===e.target.name&&c(e.target.value),"password"===e.target.name&&E(e.target.value),"email"===e.target.name&&d(e.target.value)};return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var n={username:l,password:s,email:b},a={body:JSON.stringify(n),method:"POST"};fetch("/api/v1/users",a).then((function(e){return e.json().catch((function(e){return console.warn("cant unmarshal response",e)}))})).then((function(t){t.ok&&e.history.push("/home")})).catch((function(e){return console.warn(e)}))}},r.a.createElement("label",null,"Username"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"username",value:l,onChange:p,autoComplete:"username"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Email"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"email",value:b,onChange:p,autoComplete:"email"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Password"),r.a.createElement("br",null),r.a.createElement("input",{type:"password",name:"password",value:s,onChange:p,autoComplete:"new-password"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",null,"Submit")))},h=n(29),b=function(e){var t=Object(a.useState)([]),n=Object(o.a)(t,2),l=n[0],c=n[1];Object(a.useEffect)((function(){var t="/api/v1/users/".concat(e.currentUser),n=i(),a={method:"GET",headers:{Authorization:"Bearer ".concat(n)}};fetch(t,a).then((function(e){return e.json()})).then((function(e){c(e.result.bets_involved)})).catch((function(e){return console.error(e)}))}),[e.currentUser]);var u=null;return u=l?l.sort((function(e){return e.created_at})).map((function(e){(new Date).getTimezoneOffset();var t=new Date(e.created_at);return r.a.createElement("div",{key:e.id},r.a.createElement("a",{style:{textDecoration:"none",color:"cornflowerblue"},href:"bet/".concat(e.id)},r.a.createElement("h3",null,e.bet_name),r.a.createElement("span",null,"Created: ",h(t).fromNow(!0)," ago"),r.a.createElement("br",null)))})):r.a.createElement("div",null,r.a.createElement("h3",null,"Oops, seems you have no bets yet. Click above to create new bets.")),r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome ",e.currentUser,", this is your dashboard"),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("a",{style:{color:"blue",textDecoration:"none"},href:"/new-bet"},"New Bet")),u))},d=Object(m.f)((function(e){var t=Object(a.useState)(null),n=Object(o.a)(t,2),l=n[0],c=n[1];return Object(a.useEffect)((function(){var t=i();if(t){var n={method:"GET",headers:{Authorization:"Bearer ".concat(t)}};fetch("/api/v1/users/yugoslavman",n).then((function(e){return e.json()})).then((function(e){c(e.result)})).catch((function(t){localStorage.removeItem("token"),e.history.push("/login")}))}else e.history.push("/login")}),[e.history]),void 0===l?r.a.createElement("div",null,"Loading..."):r.a.createElement("div",null,e.children)})),p=(n(31),n(32)),v=function(e){var t=r.a.createElement("div",{className:"right"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/dashboard"},"Dashboard")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/@/".concat(e.currentUser)},e.currentUser)),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{onClick:e.logoutHandler,className:"nav-link",href:"/logout"},"Logout"))),n=r.a.createElement("div",{className:"right"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/register"},"Register")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/login"},"Login")));return r.a.createElement("header",{id:"header"},r.a.createElement("nav",{className:"header-nav"},r.a.createElement("ul",{className:"header-ul"},r.a.createElement("div",{className:"left"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/"},r.a.createElement("img",{src:p,height:"50",alt:"logo"}))),r.a.createElement("li",{className:"nav-item"}," ",r.a.createElement("h3",null,"MidMan")," "),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/"},"About Us")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/"},"Contact Us"))),e.isLoggedIn?t:n)))},g=(n(33),function(e){return r.a.createElement("footer",null,r.a.createElement("h1",null,"I am a footer"))}),j=(n(34),function(e){return r.a.createElement("div",{className:"sidebar"},r.a.createElement("h1",null,"I am a Sidebar"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"/clickme"},"click me")),r.a.createElement("li",null,r.a.createElement("a",{href:"/clickme"},"click me")),r.a.createElement("li",null,r.a.createElement("a",{href:"/clickme"},"click me")),r.a.createElement("li",null,r.a.createElement("a",{href:"/clickme"},"click me")),r.a.createElement("li",null,r.a.createElement("a",{href:"/clickme"},"click me")),r.a.createElement("li",null,r.a.createElement("a",{href:"/clickme"},"click me")),r.a.createElement("li",null,r.a.createElement("a",{href:"/clickme"},"click me"))))}),k=(n(35),function(e){return r.a.createElement("div",{className:"main"},r.a.createElement("h1",null,"This is main content"),e.children)}),w=Object(m.f)((function(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),l=n[0],c=n[1];return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var n="/api/v1/users/".concat(e.currentUser,"/create_bet"),a=i(),r={bet_name:l},c={method:"POST",headers:{Authorization:"Bearer ".concat(a)},body:JSON.stringify(r)};fetch(n,c).then((function(e){return e.json()})).then((function(t){console.log(t),e.history.push("/dashboard")})).catch((function(e){return console.error(e)}))}},r.a.createElement("label",null,"Bet Name"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"betName",value:l,onChange:function(e){"betName"===e.target.name&&c(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{type:"submit"},"Submit")))})),y=Object(m.f)((function(e){var t=Object(a.useState)({}),n=Object(o.a)(t,2),l=n[0],c=n[1],u=Object(a.useState)(""),m=Object(o.a)(u,2),s=m[0],E=m[1],f=Object(a.useState)(!0),h=Object(o.a)(f,2),b=h[0],d=h[1],p=Object(a.useState)(!0),v=Object(o.a)(p,2),g=v[0],j=v[1],k=i(),w=e.match.params.id;Object(a.useEffect)((function(){var e="/api/v1/bets/".concat(w),t={method:"GET",headers:{Authorization:"Bearer ".concat(k)}};fetch(e,t).then((function(e){return e.json()})).then((function(e){c(e.result)})).catch((function(e){return console.warn(e)}))}),[e.match.params.id]);var y=l.users&&l.users.length,O=l.users&&l.users.map((function(e){return e.username}));return r.a.createElement("div",null,r.a.createElement("h3",null,l.bet_name," ",r.a.createElement("small",null,"Created by: ",l.creator&&l.creator.username)),r.a.createElement("p",null,"Participants "),l.creator&&l.creator.username===e.currentUser?r.a.createElement("div",null,r.a.createElement("button",{onClick:function(e){return d(!1)},disabled:!l.ongoing},"Add Participant"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t="/api/v1/bets/".concat(w,"/add_user/").concat(s),n={method:"PUT",headers:{Authorization:"Bearer ".concat(k)}};fetch(t,n).then((function(e){return e.json()})).then((function(e){console.log(e),console.log(e.ok),e.ok&&c(e.result),d(!0)})).catch((function(e){return console.warn(e)}))},hidden:b},r.a.createElement("input",{type:"text",placeholder:"Username of participant",value:s,onChange:function(e){return E(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit"},'Add "Better" (lol!)'),r.a.createElement("button",{onClick:function(){return d(!0)},type:"button"},"Cancel"))):null,r.a.createElement("ul",null,l.users&&l.users.map((function(t,n){return r.a.createElement("li",{style:{listStyleType:"none"},key:t.id},r.a.createElement("a",{style:{textDecoration:"none",color:"black"},href:"/@/".concat(t.username)},r.a.createElement("span",null,t.username," ",r.a.createElement("small",null,"votes: ",l.votes[t.username]))),r.a.createElement("span",null,O.includes(e.currentUser)?r.a.createElement("span",null,r.a.createElement("button",{name:t.username,disabled:!l.ongoing,onClick:function(t){!function(t){var n="/api/v1/bets/".concat(w,"/").concat(e.currentUser,"/vote/").concat(t.target.name);console.log("URL",n);var a={method:"PUT",headers:{Authorization:"Bearer ".concat(k)}};fetch(n,a).then((function(e){return e.json()})).then((function(e){console.log(e),e.ok&&c(e.result)})).catch((function(e){return console.warn(e)}))}(t)}},"UpVote"),r.a.createElement("button",{name:t.username,disabled:!l.ongoing,onClick:function(t){!function(t){var n="/api/v1/bets/".concat(w,"/").concat(e.currentUser,"/unvote/").concat(t.target.name),a={method:"PUT",headers:{Authorization:"Bearer ".concat(k)}};fetch(n,a).then((function(e){return e.json()})).then((function(e){console.log(e),e.ok&&c(e.result)})).catch((function(e){return console.warn(e)}))}(t)}},"DownVote")):null),r.a.createElement("br",null),r.a.createElement("br",null),n<y-1?"":r.a.createElement("br",null))}))),r.a.createElement("p",null,"Status: ",l.ongoing?"in progress":"completed"),l.ongoing?r.a.createElement("p",null,"Winner: no winner yet"):r.a.createElement("p",null,"Winner: ",l.winner),r.a.createElement("br",null),r.a.createElement("br",null),l.creator&&l.creator.username===e.currentUser?r.a.createElement("div",null,r.a.createElement("button",{disabled:!l.ongoing,onClick:function(){return j(!1)}},"Delete bet"),r.a.createElement("div",{hidden:g},r.a.createElement("span",null,"Are you sure? Action cannot be reversed! "),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(t){return function(t){t.preventDefault();var n="/api/v1/bets/".concat(w),a={method:"DELETE",headers:{Authorization:"Bearer ".concat(k)}};fetch(n,a).then((function(e){return e.json()})).then((function(t){console.log(t.ok),t.ok&&e.history.push("/dashboard")})).catch((function(e){return console.warn(e)}))}(t)}},"Yes Delete")," ",r.a.createElement("button",{onClick:function(){return j(!0)}},"No I'm Just Checking!"))):null)})),O=Object(m.f)((function(e){var t=Object(a.useState)({}),n=Object(o.a)(t,2),l=n[0],c=n[1],u=Object(a.useState)(""),m=Object(o.a)(u,2),s=m[0],E=m[1],f=Object(a.useState)(""),h=Object(o.a)(f,2),b=h[0],d=h[1],p=Object(a.useState)(""),v=Object(o.a)(p,2),g=v[0],j=v[1],k=Object(a.useState)(!0),w=Object(o.a)(k,2),y=w[0],O=w[1],S=e.match.params.username,N=i(),C=function(e){e.preventDefault(),console.log("not implemented")};return Object(a.useEffect)((function(){var e="/api/v1/users/".concat(S),t={method:"GET",headers:{Authorization:"Bearer ".concat(N)}};fetch(e,t).then((function(e){return e.json()})).then((function(e){e.ok&&c(e.result)})).catch((function(e){return console.warn(e)}))}),[]),r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement("h3",null,l.username),l.created_bets?r.a.createElement("h3",null,"Created bets"):r.a.createElement("p",null,"Not created any bets yet"),l.created_bets?l.created_bets.map((function(e){return r.a.createElement("a",{style:{textDecoration:"none",color:"black"},href:"/bet/".concat(e.id),key:e.id},r.a.createElement("p",null,e.bet_name),r.a.createElement("small",null,e.users))})):"",e.currentUser===l.username?r.a.createElement("div",{style:{justifySelf:"flex-end",alignSelf:"flex-end"}},r.a.createElement("a",{onClick:function(){return O(!y)},style:{textDecoration:"none",color:"black"}},"ChangePassword?"),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("form",{hidden:y,onSubmit:function(e){return C}},r.a.createElement("label",null,"Old Password"),r.a.createElement("br",null)," ",r.a.createElement("input",{onChange:function(e){return E(e.target.value)},value:s,type:"password",autoComplete:"current-password"})," ",r.a.createElement("br",null),r.a.createElement("label",null,"New Password"),r.a.createElement("br",null)," ",r.a.createElement("input",{onChange:function(e){return d(e.target.value)},value:b,type:"password",autoComplete:"new-password"})," ",r.a.createElement("br",null),r.a.createElement("label",null,"Confirm New Password"),r.a.createElement("br",null)," ",r.a.createElement("input",{onChange:function(e){return j(e.target.value)},value:g,type:"password",autoComplete:"new-password"})," ",r.a.createElement("br",null),r.a.createElement("button",{type:"submit"},"Submit"),r.a.createElement("button",{onClick:function(e){e.preventDefault(),O(!0)},type:"cancel"},"Cancel"),r.a.createElement("br",null)))):null)}));var S=function(e){var t=Object(a.useState)(!!i()),n=Object(o.a)(t,2),l=n[0],c=n[1],h=Object(a.useState)(localStorage.getItem("current-user")),p=Object(o.a)(h,2),S=p[0],N=p[1],C=function(){c(!0)};return r.a.createElement("div",{className:"root-wrapper"},r.a.createElement("div",{className:"header-wrapper"},r.a.createElement(v,{isLoggedIn:l,currentUser:S,logoutHandler:function(){c(!1),localStorage.removeItem("token")}})),r.a.createElement("div",{className:"sidebar-wrapper"},r.a.createElement(j,null)),r.a.createElement("div",{className:"main-wrapper"},r.a.createElement(k,null,r.a.createElement(u.a,null,r.a.createElement(m.c,null,r.a.createElement(m.a,{path:"/",exact:!0,component:s}),r.a.createElement(m.a,{path:"/login",exact:!0,render:function(e){return r.a.createElement(E,{loginHandler:C,setCurrentUser:function(e){return N(e)}})}}),r.a.createElement(m.a,{path:"/register",exact:!0,component:f}),r.a.createElement(d,null,r.a.createElement(m.a,{path:"/new-bet",exact:!0,render:function(e){return r.a.createElement(w,{currentUser:S})}}),r.a.createElement(m.a,{path:"/bet/:id",exact:!0,render:function(e){return r.a.createElement(y,{currentUser:S})}}),r.a.createElement(m.a,{path:"/dashboard",exact:!0,render:function(e){return r.a.createElement(b,{currentUser:S})}}),r.a.createElement(m.a,{path:"/@/:username",exact:!0,render:function(e){return r.a.createElement(O,{currentUser:S})}})))))),r.a.createElement("div",{className:"footer-wrapper"},r.a.createElement(g,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.38f04484.chunk.js.map